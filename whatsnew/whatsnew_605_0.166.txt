0.166 2015/09/30 [#605 - Miodrag Milanovic]
-------------------------------------------


MAMETesters Bugs Fixed
----------------------
- 00878: [Graphics] (suna8.c) rranger: A piece of the yellow box on the map screen after the game start is over the CREDIT text. (Luca Elia)
- 00999: [Sound] (segaxbd.c) gprider: There are no demo sounds even when the dip switch is on. (David Haywood, Ariane Fugmann)
- 04701: [Graphics] (seta.c) blandia, blandiap: Graphic garbage (Mamesick)
- 05345: [Core] (a2600.c) a2600 [dodgeem, haunted]: Assorted issues related to 6502 CPU
- 05622: [Graphics] (msx.c) MSX2 and MSX2+: Screen resolutions and refresh rates are wrong. (Wilbert Pol)
- 05623: [Graphics] (msx.c) MSX2 and MSX2+: Top and bottom screenborders are wrong for both PAL and NTSC (Wilbert Pol)
- 05714: [Graphics] (a2600.c) a2600p: The demo "(core) by wamma" is not working properly.
- 05718: [Graphics] (a2600.c) a2600p: The demo "TOM/JONES by trilobit" is not working properly.
- 05872: [DIP/Input] (sms.c) sms, sms1 [alexbmx][megumi]: Incorrect behavior of the Sports Pad (US model) emulation
- 05969: [Graphics] (galaxian.c) jumpbug and clones: Missing scrolling starfield (Osso)
- 05971: [Graphics] (suna8.c) sranger and others clones: graphics issues (Luca Elia)
- 06024: [Crash/Freeze] (system1.c) hvymetal, choplift: Crashing with a message in IC TEST (David Haywood)
- 06028: [Sound] (neogeo.c) neogeo.c: Wrong volume of SSG versus the FM & ADPCM sound generation parts (Dr.Venom)
- 06029: [Crash/Freeze] (cclimber.c) yamato: game is broken [2 bugs] (Osso)


New machines added or promoted from NOT_WORKING status
------------------------------------------------------
TI DataMan [hap, Sean Riddle]
Waku Waku Sonic Patrol Car [Will Medved, Ryan Holtz, The Dumping Union]

New clones added or promoted from NOT_WORKING status
----------------------------------------------------
J. J. Squawkers (older) [Alex Marshall]
Minefield (The Logicshop, bootleg) [David Haywood, Guru]
New Sinbad 7 (set 2) [Siftware, MASH]
Oriental Legend (ver. 111, Korean Board) [DarkSoft]
Point Blank (World, GN2 Rev B, set 2) [Caius, Smitdogg, The Dumping Union]
Revolution X (prototype, rev 5.0 5/23/94) [Chris Engel]
Rolling Thunder (oldest) [Layer (from neo-arcadia & jammaplus)]
Route 16 (set 1) [Siftware, MASH] (old set 1 is now 'Route 16 (set 3, bootleg?)')
Shocking (Korea, set 2) [Arcade Belgium (dump by Nomax)]
Soccer Superstars (ver UAC) [Smitdogg, The Dumping Union]
various Sega decrypted bootleg sets [Misc contributors]

New machines marked as NOT_WORKING
----------------------------------
3 Lil' Pigs (bad dump)
Amazonia King II (V202BR) [Macgaiver]
Brother MT735 thermal printer [Cowering, O. Galibert]
Canon S-80 typowriter [Felipe Sanches]
Cobra: The Arcade (CBR1 Ver. B) [Guru]
Commodore MPS-1230 NLQ Printer [Guru, R. Belmont]
DECwriter III (LA120) [Lord Nightmare, NeXT]
Dump The Ump (bad dump)
Fiddle Stix (1st Rev) (Quick $ilver)
Heurikon HK68K/V10 VME board [Joakim Larsson]
Hoop Shot (Doyle & Assoc.)
Jack & The Beanstalk (Doyle & Assoc.?) (bad dump)
LG GP40NW10 USB DVD writer [O. Galibert]
Mizar 8105 [Joakim Larsson]
MVME350 - Streaming Tape Controller support QIC-02 [Joakim Larsson]
Piggy Pass (Doyle & Assoc.)
Round and Round (Rev 6) (Quick $ilver)
Smart Toss 'em / Smartball (Ver 2.0) [David Haywood]
Squale [Miodrag Milanovic, thanks to Olivier Aichelbaum]
VTech CARS 2 Laptop (Germany) [TeamEurope]
VTech Genius KID ABC Fan (Germany) [TeamEurope]
Wacky Gator (Data East - 1990) [Felipe Sanches]
ZAP - Z80 Applications Processor (by Steve Ciarcia - 1981) [Felipe Sanches]

New clones marked as NOT_WORKING
--------------------------------
Hard Head (bootleg, set 2) [leniad]
Kung Fu (IGS, v100) [Siftware]
Rescue (Free Enterprise Games, bootleg) [David Haywood, Guru] (some code seems missing even after descrambling?)
Ridge Racer V Arcade Battle (RRV1 Ver. A) [Guru]
Soul Calibur III (SC31002-NA-A key, NA-A disc) [Guru]
Tekken 5.1 (TE53 Ver. B) [Guru]
Tora Tora (prototype?, set 2)  [Siftware]

New WORKING software list additions
-----------------------------------
tutor.xml: (Tomy Tutor & Pyuuta cartridges)
- Rescue Copter [3D] (Jpn) [Ryan Holtz, Team Europe]
- Triple Command (Jpn) [Ryan Holtz, Team Europe]
nes.xml: (Nintendo Entertainment System cartridges)
- Booky Man (Spa) [SSJ, TeamEurope]
a800_flop.xml: (Atari 400 / 800 floppy disks)
 - Elektra Glide [Curt Coder]
 - KoalaPainter (Light Pen) [Curt Coder]
c64_flop.xml: (Commodore 64 diskettes) 
 - Elektra Glide [Curt Coder]
 - KoalaPainter (Light Pen) [Curt Coder]

New NOT_WORKING software list additions
---------------------------------------
gameking.xml: (TimeTop GameKing cartridges)
 - various 4-in-1 sets [SSJ, TeamEurope]   
gameking3.xml: (TimeTop GameKing 3 cartridges)
 - Fly Cab [SSJ, TeamEurope]
gbcolor.xml: (Nintendo Game Boy Color cartridges)
 - Magic Lamp [SSJ, TeamEurope, Taizou]
 - Binary Monster 2 - Adventure of Hell(TW) [SSJ, TeamEurope]
nes.xml: (Nintendo Entertainment System cartridges)
 - Coolboy RS-17 (203-in-1) [SSJ, TeamEurope]
pico.xml: (Sega Pico cartridges)
 - Anpanman Eigo - Tanosii Kanibaru (Tw) [TeamEurope]
 - Doraemon Machinaka (Tw) [TeamEurope]
 - Mickey To Ookina Furudokei (Tw)) [TeamEurope]
 - Ojamajo Doremi Dokka~n! (Jpn) [TeamEurope]
 - Professor Pico and the Paintbox Puzzle (Euro) [TeamEurope]
 - Peter Pan - Neverland e Ikou! ~10th Anniversary Edition~ (Jpn) [TeamEurope]
 - Sanou Kaihatsu Series 5 Meiro - Kioku (CD Tsuki) (Jpn) [TeamEurope]
 - Susie-chan to Marvy o-Tetsudai Da~isuki! (Jpn) [TeamEurope]
vc4000.xml: (Interton VC 4000 cartridges)
 - Come Frutas [SSJ, TeamEurope]
jaguar.xml: (Atari Jaguar cartridges)
 - Air Cars (1994 version) [Porchy]


Source changes:
---------------
-TMS51xx: Got rid of the request_bits and FIFO implementation, both of
 which were incorrect to hardware. Minor ZPAR fix. Some comment
 cleanup [Lord Nightmare].

-TMS5110.c: Finally fixed zpar logic correctly [Lord Nightmare].

-TMS5220: implemented talk status state machine properly as shown by
 patent. Got rid of m_target_* hack in favor of loading data from ROM
 as needed. Fixed ZPAR logic. Fixed pitch zeroing to match(?) patent.
. [Lord Nightmare].

-Added missing PLD for Quantum. [Andrew Welburn]

-TMS5220: Purge process() of gotos to hopefully make the compiler's
 optimizer happier. Add a hack so Victory's "Shields Up" sample and the
 sample afterward aren't corrupted [Lord Nightmare].

-TMS5110: Purge process() of gotos to hopefully make the compiler's
 optimizer happier [Lord Nightmare].

-chihiro.c: under the hood 3d accelerator changes [Samuele Zannoli]
 * correct some errors
 * add more primitives to some graphic methods
 * add color mask support
 * method 0x100 (NOP) generates correct interrupt
 * some method parameters are readable from mmio registers

-chihiro.c/xbox.c: Various updates [Samuele Zannoli]
 * support render targets different than rgb32
 * support 16 bit depth buffer
 * support independent clearing of stencil and depth values
 * update ROM loading
 * add xbox hack to avoid stalling
 * set xbox bios 4134 as the one used

-xbox.c: now it is able to execute the default.xbe from an iso image [Samuele Zannoli]

-Naomi / Chihiro docs update [f205v]

-Fixed GetModuleHandle to be universal. [Vladimir Kryvian]

-C352: Add divider for System 23, change enum format [Ian Karlsson]

-groundfx.c: fix accelerator [baritonomarchetto]

-besta: hook up 68230 and make its ROM self-test pass [shattered]

-at, at_keybc: hook up Display Switch and remove irrelevant DSW0 [shattered]

-Add skeleton support for K1801VM2 (as clone of T11) and skeleton
 driver dvk_kcgd that uses it [shattered]

-TMS5110: Add same FAST_START_HACK as in tms5220, makes snmath word
 delay closer to hardware [Lord Nightmare].

-cps1.c: varthu - Added correct dump of VA63B.1A [Caius, The Dumping Union]

-deco32.c: Added some missing PAL dumps [Caius, www.jammarcade.net]

-asst128: use better ROM dumps	[shattered]

-apple2/apple2e: fix raster parameters, French Touch "Scroll Scroll
 Scroll" demo now syncs on apple2e driver [R. Belmont].

-suna8.c: Overhauled the rendering of text sprites, added masking [Luca Elia] 
 Not perfect yet but improves a few effects compared to PCB videos.

-goldstar.c: improve input and DIP switch documentation [Vas Crabb, hsialin]
 * cmast91: Document Skill Stop DIP switch and Stop 1/2/3 buttons,
    correct settings for '7' In Double Up Game and make descriptions
    consistent with other games
 * cmezspin: fix DIP switches and inputs (more like cmv4 than cmasterb),
    add improved layout to match corrected inputs

-opengl: fix overly-strict requirement on SCREEN shaders to match docs 
 [cgwg]

-n64.c: Development Disk Drive setting support [LuigiBlood]

-apple2e.c: select displayed page for floating bus [Peter Ferrie]

-French Touch "Crazy Cycles" no longer hangs, but still missing effects

-Sega X-Board
 * Converted 'X Board' to be a device
 * Correctly emulated the 'Twin' X-Board setup which was used by GP Rider
   (a bridge board with shared RAM) [David Haywood, Ariane Fugmann]

-bbc: clones, floppy formats, softlists, and cleanups [Nigel Barnes].
 * Added clone bbcb1770, bbcb now 8271 only.
 * Added clone pro128s, Olivetti Prodest PC 128S.
 * Added clones Acorn Business Computers and Cambridge Workstation.
 * Added clone reutapm, Reuters APM board.
 * Improved floppy formats, added dsd and double density formats for
    ADFS.
 * Added speech PHROMs, not yet hooked up correctly.
 * Added softlists bbcb_de_cass, bbcb_us_flop and bbcmc_flop.
 * Added S11 links (dipswitch) to specify Econet ID.
 * Address map cleanups.

-macrossp.c: Add PAL dumps to Macross Plus [Caius]

-cninja.c: Add PAL dumps to Caveman Ninja [www.jammarcade.net]

-Sega Pico PCM improvements [ValleyBell]

-pcd: implement pcx video device [Carl, Axel Muhr]

-al520ex: added preliminary Magic Sound expansion (not working)
 [Barry Rodewald]

-netdev: fix pcap crashes on OS X [Rob Braun]

-IGS 027A: Amazonia King V104BR [Felipe Sanches]

-preliminary decryption of newly added igs_m027.c sets [iq_132]

-adjust NeoGeo sound balance based on some hw recordings [Dr.Venom]

-improve amazonia decryption [iq_132]
 
-TMS5220 and TMS5110: Fix an off-by-one in the interpolator causing the
 k5 coefficient to not be zeroed during unvoiced frames. Fixes various
 speech glitches [Lord Nightmare].

-TMS5220 and TMS5110: Fixed incorrect implementation of pitch zero
 which caused an improperly long period with no pitch at an
 interpolation inhibited -> voiced boundary. Moved unvoiced parameter
 zeroing into the frame parser, as on the original chips. Some minor
 TALK/SPEN state machine changes as well, which should have minimal
 effect [Lord Nightmare].

-added 'global_inputs' (disabled by default) to allow MAME to read
 inputs even when it doesn't have the focus [Scrooge McClunk] 

-315-5124.c: Minor changes and fix a regression that in theory could
 affect zoomed sprites in TMS9918 modes.  [Enik Land]

-gamegear.c / sms.c:  Improve GG-SMS scaling code a little and update
 the Todo list.  Fixed MT#05872 regarding incorrect behavior of the
 Sports Pad (US model) emulation.  [Enik Land]

-Fix PSG chips to have volume reg inited on reset to 0x0 based on tests
 by ValleyBell. Made Sega PSG chips start up with register 0x3 selected
 (volume for channel 2) based on hardware tests by Nemesis.
 [Lord Nightmare, ValleyBell, Nemesis]

-naomi.c: redumped ss2005 and initdv2j [Guru, R. Belmont]

-ksys573: redumped CDs for drmn8m and gtrfrk9m [Guru]

-dumped another ROM on amazona [Felipe Sanches]

-Significant accuracy improvements, documentation and other updates to
 the ER-2055 EAROM emulation used for several Atari games, based on
 schematics and datasheets. It now uses a state machine to keep track
 of the current EAROM bus state [Lord Nightmare].

-Simplified coreutil.c gregorian_days_in_month. [William Krick]

-DEC LA120: Keyboard matrix is done, keyboard reading should work in
 theory. UART partly attached. Corrected cpu XTAL [Lord Nightmare].

-DEC LA120: Implemented LED output via logerror; marked one ROM as bad
 since it fails its internal checksum tests [Lord Nightmare].

-m68k: fix corner case for 020+ bitfield instructions [Till Harbaum]

-Fixed Counter Steer booting [Angelo Salese]
 * Spotted Slave CPU bus request line;
 * Fixed address line swapping for Slave CPU area at 0x2000-0x2fff;

-n64.c: N64 changes: [Happy]
 * PI transfers round down/truncate the last bit.
 * SI transfers signal busy while waiting for a delay.
 * Preliminary work for separating VI and RDP functionality.
 * VI timing period is now set dynamically from the VI registers. VI timing should now be accurate (for NTSC).
- DEC LA120: Redumped firmware ROM, now passes checksum test [Brian Walenz].
- a2600: new 6502 PC=cur inst, old 6502 PC=prev inst (MT 5345) [Mike Saarna, Trebor, R. Belmont].
- Seperate Space Warp into it's own skeleton driver [mixxmaster].
- m68k: fix 020+ PACK/UNPK nibble ordering [Till Harbaum, R. Belmont].
- i8271: Modernize [Carl].
- Convert galastrm, model2, midzeus, namcos23, and hng64 drivers to universal "poly" rasterizing interface [Andrew Gardner].
- Preliminary refactor of IGS017/IGS031 video hardware to be a device so that it can be used by the igs_m027.c games (IGS gamblers) once the internal ARM roms have been dumped [David Haywood].
- Reduce tagmap lookups in taito_f3.c (was causing severe slowdown in arkretrn) [David Haywood].
- a7800: More accurate representation of the Activision cart hardware for utilized hotspots. Rampage no longer crashes when P1 selects Lizzy [Mike Saarna].